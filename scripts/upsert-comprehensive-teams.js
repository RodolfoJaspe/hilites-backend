const { createClient } = require('@supabase/supabase-js');
require('dotenv').config();

// Use service role key for seeding to bypass RLS
const supabase = createClient(
  process.env.SUPABASE_URL,
  process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_ANON_KEY
);

// Comprehensive team data for major European leagues
const COMPREHENSIVE_TEAMS_DATA = {
  premierLeague: [
    { external_id: '100', name: 'Burnley', short_name: 'Arsenal', code: 'BUR', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1882, venue_name: 'Turf Moor', venue_city: 'Burnley', venue_capacity: 21944, logo_url: 'https://crests.football-data.org/100.png', website_url: 'https://burnleyfootballclub.com', is_active: true },
    { external_id: '57', name: 'Arsenal', short_name: 'Arsenal', code: 'ARS', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1886, venue_name: 'Emirates Stadium', venue_city: 'London', venue_capacity: 60260, logo_url: 'https://crests.football-data.org/57.png', website_url: 'https://www.arsenal.com', is_active: true },
    { external_id: '61', name: 'Chelsea', short_name: 'Chelsea', code: 'CHE', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1905, venue_name: 'Stamford Bridge', venue_city: 'London', venue_capacity: 40834, logo_url: 'https://crests.football-data.org/61.png', website_url: 'https://www.chelseafc.com', is_active: true },
    { external_id: '65', name: 'Manchester City', short_name: 'Man City', code: 'MCI', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1880, venue_name: 'Etihad Stadium', venue_city: 'Manchester', venue_capacity: 53400, logo_url: 'https://crests.football-data.org/65.png', website_url: 'https://www.mancity.com', is_active: true },
    { external_id: '66', name: 'Manchester United', short_name: 'Man Utd', code: 'MUN', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1878, venue_name: 'Old Trafford', venue_city: 'Manchester', venue_capacity: 74310, logo_url: 'https://crests.football-data.org/66.png', website_url: 'https://www.manutd.com', is_active: true },
    { external_id: '64', name: 'Liverpool', short_name: 'Liverpool', code: 'LIV', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1892, venue_name: 'Anfield', venue_city: 'Liverpool', venue_capacity: 53394, logo_url: 'https://crests.football-data.org/64.png', website_url: 'https://www.liverpoolfc.com', is_active: true },
    { external_id: '73', name: 'Tottenham Hotspur', short_name: 'Spurs', code: 'TOT', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1882, venue_name: 'Tottenham Hotspur Stadium', venue_city: 'London', venue_capacity: 62850, logo_url: 'https://crests.football-data.org/73.png', website_url: 'https://www.tottenhamhotspur.com', is_active: true },
    { external_id: '67', name: 'Newcastle United', short_name: 'Newcastle', code: 'NEW', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1892, venue_name: 'St. James\' Park', venue_city: 'Newcastle', venue_capacity: 52305, logo_url: 'https://crests.football-data.org/67.png', website_url: 'https://www.nufc.co.uk', is_active: true },
    { external_id: '354', name: 'Crystal Palace', short_name: 'Crystal Palace', code: 'CRY', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1905, venue_name: 'Selhurst Park', venue_city: 'London', venue_capacity: 25486, logo_url: 'https://crests.football-data.org/354.png', website_url: 'https://www.cpfc.co.uk', is_active: true },
    { external_id: '563', name: 'West Ham United', short_name: 'West Ham', code: 'WHU', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1895, venue_name: 'London Stadium', venue_city: 'London', venue_capacity: 66000, logo_url: 'https://crests.football-data.org/563.png', website_url: 'https://www.whufc.com', is_active: true },
    { external_id: '397', name: 'Brighton & Hove Albion', short_name: 'Brighton', code: 'BHA', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1901, venue_name: 'American Express Community Stadium', venue_city: 'Brighton', venue_capacity: 31800, logo_url: 'https://crests.football-data.org/397.png', website_url: 'https://www.brightonandhovealbion.com', is_active: true },
    { external_id: '58', name: 'Aston Villa', short_name: 'Aston Villa', code: 'AVL', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1874, venue_name: 'Villa Park', venue_city: 'Birmingham', venue_capacity: 42640, logo_url: 'https://crests.football-data.org/58.png', website_url: 'https://www.avfc.co.uk', is_active: true },
    { external_id: '402', name: 'Brentford', short_name: 'Brentford', code: 'BRE', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1889, venue_name: 'Brentford Community Stadium', venue_city: 'London', venue_capacity: 17250, logo_url: 'https://crests.football-data.org/402.png', website_url: 'https://www.brentfordfc.com', is_active: true },
    { external_id: '1044', name: 'AFC Bournemouth', short_name: 'Bournemouth', code: 'BOU', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1899, venue_name: 'Vitality Stadium', venue_city: 'Bournemouth', venue_capacity: 11379, logo_url: 'https://crests.football-data.org/1044.png', website_url: 'https://www.afcb.co.uk', is_active: true },
    { external_id: '63', name: 'Fulham', short_name: 'Fulham', code: 'FUL', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1879, venue_name: 'Craven Cottage', venue_city: 'London', venue_capacity: 19359, logo_url: 'https://crests.football-data.org/63.png', website_url: 'https://www.fulhamfc.com', is_active: true },
    { external_id: '62', name: 'Everton', short_name: 'Everton', code: 'EVE', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1878, venue_name: 'Goodison Park', venue_city: 'Liverpool', venue_capacity: 39414, logo_url: 'https://crests.football-data.org/62.png', website_url: 'https://www.evertonfc.com', is_active: true },
    { external_id: '76', name: 'Wolverhampton Wanderers', short_name: 'Wolves', code: 'WOL', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1877, venue_name: 'Molineux Stadium', venue_city: 'Wolverhampton', venue_capacity: 31700, logo_url: 'https://crests.football-data.org/76.png', website_url: 'https://www.wolves.co.uk', is_active: true },
    { external_id: '351', name: 'Nottingham Forest', short_name: 'Nott\'m Forest', code: 'NFO', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1865, venue_name: 'City Ground', venue_city: 'Nottingham', venue_capacity: 30445, logo_url: 'https://crests.football-data.org/351.png', website_url: 'https://www.nottinghamforest.co.uk', is_active: true },
    { external_id: '356', name: 'Leicester City', short_name: 'Leicester', code: 'LEI', country: 'England', country_code: 'GB', league: 'Premier League', league_id: '2021', continental_confederation: 'UEFA', founded_year: 1884, venue_name: 'King Power Stadium', venue_city: 'Leicester', venue_capacity: 32261, logo_url: 'https://crests.football-data.org/338.png', website_url: 'https://www.lcfc.com', is_active: true }
  ],
  
  laLiga: [
    { external_id: '81', name: 'FC Barcelona', short_name: 'Barcelona', code: 'BAR', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1899, venue_name: 'Camp Nou', venue_city: 'Barcelona', venue_capacity: 99354, logo_url: 'https://crests.football-data.org/81.png', website_url: 'https://www.fcbarcelona.com', is_active: true },
    { external_id: '86', name: 'Real Madrid CF', short_name: 'Real Madrid', code: 'RMA', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1902, venue_name: 'Santiago Bernab√©u', venue_city: 'Madrid', venue_capacity: 81044, logo_url: 'https://crests.football-data.org/86.png', website_url: 'https://www.realmadrid.com', is_active: true },
    { external_id: '78', name: 'Atletico Madrid', short_name: 'Atl√©tico', code: 'ATM', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1903, venue_name: 'Wanda Metropolitano', venue_city: 'Madrid', venue_capacity: 68456, logo_url: 'https://crests.football-data.org/78.png', website_url: 'https://www.atleticodemadrid.com', is_active: true },
    { external_id: '559', name: 'Sevilla FC', short_name: 'Sevilla', code: 'SEV', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1890, venue_name: 'Ram√≥n S√°nchez-Pizju√°n', venue_city: 'Seville', venue_capacity: 43883, logo_url: 'https://crests.football-data.org/559.png', website_url: 'https://www.sevillafc.es', is_active: true },
    { external_id: '94', name: 'Villarreal CF', short_name: 'Villarreal', code: 'VIL', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1923, venue_name: 'Estadio de la Cer√°mica', venue_city: 'Villarreal', venue_capacity: 23500, logo_url: 'https://crests.football-data.org/94.png', website_url: 'https://www.villarrealcf.es', is_active: true },
    { external_id: '79', name: 'Athletic Club', short_name: 'Athletic', code: 'ATH', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1898, venue_name: 'San Mam√©s', venue_city: 'Bilbao', venue_capacity: 53289, logo_url: 'https://crests.football-data.org/79.png', website_url: 'https://www.athletic-club.eus', is_active: true },
    { external_id: '95', name: 'Valencia CF', short_name: 'Valencia', code: 'VAL', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1919, venue_name: 'Mestalla', venue_city: 'Valencia', venue_capacity: 49430, logo_url: 'https://crests.football-data.org/95.png', website_url: 'https://www.valenciacf.com', is_active: true },
    { external_id: '95', name: 'Real Sociedad', short_name: 'Real Sociedad', code: 'RSO', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1909, venue_name: 'Reale Arena', venue_city: 'San Sebasti√°n', venue_capacity: 39500, logo_url: 'https://crests.football-data.org/95.png', website_url: 'https://www.realsociedad.eus', is_active: true },
    { external_id: '90', name: 'Real Betis', short_name: 'Betis', code: 'BET', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1907, venue_name: 'Estadio Benito Villamar√≠n', venue_city: 'Seville', venue_capacity: 60720, logo_url: 'https://crests.football-data.org/90.png', website_url: 'https://www.realbetisbalompie.es', is_active: true },
    { external_id: '727', name: 'Getafe CF', short_name: 'Getafe', code: 'GET', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1983, venue_name: 'Coliseum Alfonso P√©rez', venue_city: 'Getafe', venue_capacity: 17393, logo_url: 'https://crests.football-data.org/727.png', website_url: 'https://www.getafecf.com', is_active: true },
    { external_id: '558', name: 'RC Celta de Vigo', short_name: 'Celta Vigo', code: 'CEL', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1923, venue_name: 'Abanca-Bala√≠dos', venue_city: 'Vigo', venue_capacity: 29000, logo_url: 'https://crests.football-data.org/558.png', website_url: 'https://www.rccelta.es', is_active: true },
    { external_id: '720', name: 'Girona FC', short_name: 'Girona', code: 'GIR', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1930, venue_name: 'Estadi Montilivi', venue_city: 'Girona', venue_capacity: 14624, logo_url: 'https://crests.football-data.org/720.png', website_url: 'https://www.gironafc.cat', is_active: true },
    { external_id: '298', name: 'RCD Mallorca', short_name: 'Mallorca', code: 'MLL', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1916, venue_name: 'Estadi de Son Moix', venue_city: 'Palma de Mallorca', venue_capacity: 23142, logo_url: 'https://crests.football-data.org/298.png', website_url: 'https://www.rcdmallorca.es', is_active: true },
    { external_id: '79', name: 'CA Osasuna', short_name: 'Osasuna', code: 'OSA', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1920, venue_name: 'El Sadar', venue_city: 'Pamplona', venue_capacity: 18761, logo_url: 'https://crests.football-data.org/79.png', website_url: 'https://www.osasuna.es', is_active: true },
    { external_id: '87', name: 'Rayo Vallecano', short_name: 'Rayo Vallecano', code: 'RAY', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1924, venue_name: 'Campo de F√∫tbol de Vallecas', venue_city: 'Madrid', venue_capacity: 14708, logo_url: 'https://crests.football-data.org/87.png', website_url: 'https://www.rayovallecano.es', is_active: true },
    { external_id: '263', name: 'Deportivo Alav√©s', short_name: 'Alav√©s', code: 'ALA', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1921, venue_name: 'Mendizorrotza', venue_city: 'Vitoria-Gasteiz', venue_capacity: 19840, logo_url: 'https://crests.football-data.org/263.png', website_url: 'https://www.deportivoalaves.com', is_active: true },
    { external_id: '278', name: 'UD Almer√≠a', short_name: 'Almer√≠a', code: 'ALM', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1989, venue_name: 'Estadio de los Juegos Mediterr√°neos', venue_city: 'Almer√≠a', venue_capacity: 22000, logo_url: 'https://crests.football-data.org/278.png', website_url: 'https://www.udalmeriasad.com', is_active: true },
    { external_id: '264', name: 'C√°diz CF', short_name: 'C√°diz', code: 'CAD', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1910, venue_name: 'Estadio Ram√≥n de Carranza', venue_city: 'C√°diz', venue_capacity: 20724, logo_url: 'https://crests.football-data.org/264.png', website_url: 'https://www.cadizcf.com', is_active: true },
    { external_id: '83', name: 'Granada CF', short_name: 'Granada', code: 'GRA', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1931, venue_name: 'Nuevo Estadio de Los C√°rmenes', venue_city: 'Granada', venue_capacity: 19336, logo_url: 'https://crests.football-data.org/83.png', website_url: 'https://www.granadacf.es', is_active: true },
    { external_id: '275', name: 'UD Las Palmas', short_name: 'Las Palmas', code: 'LPA', country: 'Spain', country_code: 'ES', league: 'La Liga', league_id: '2014', continental_confederation: 'UEFA', founded_year: 1949, venue_name: 'Estadio de Gran Canaria', venue_city: 'Las Palmas', venue_capacity: 32392, logo_url: 'https://crests.football-data.org/275.png', website_url: 'https://www.udlaspalmas.es', is_active: true }
  ],
  
  serieA: [
    { external_id: '108', name: 'Juventus FC', short_name: 'Juventus', code: 'JUV', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1897, venue_name: 'Allianz Stadium', venue_city: 'Turin', venue_capacity: 41507, logo_url: 'https://crests.football-data.org/108.png', website_url: 'https://www.juventus.com', is_active: true },
    { external_id: '98', name: 'AC Milan', short_name: 'Milan', code: 'MIL', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1899, venue_name: 'San Siro', venue_city: 'Milan', venue_capacity: 75923, logo_url: 'https://crests.football-data.org/98.png', website_url: 'https://www.acmilan.com', is_active: true },
    { external_id: '109', name: 'Inter Milan', short_name: 'Inter', code: 'INT', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1908, venue_name: 'San Siro', venue_city: 'Milan', venue_capacity: 75923, logo_url: 'https://crests.football-data.org/109.png', website_url: 'https://www.inter.it', is_active: true },
    { external_id: '113', name: 'AS Roma', short_name: 'Roma', code: 'ROM', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1927, venue_name: 'Stadio Olimpico', venue_city: 'Rome', venue_capacity: 70634, logo_url: 'https://crests.football-data.org/113.png', website_url: 'https://www.asroma.com', is_active: true },
    { external_id: '99', name: 'SSC Napoli', short_name: 'Napoli', code: 'NAP', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1926, venue_name: 'Stadio Diego Armando Maradona', venue_city: 'Naples', venue_capacity: 54726, logo_url: 'https://crests.football-data.org/99.png', website_url: 'https://www.sscnapoli.it', is_active: true },
    { external_id: '102', name: 'Atalanta BC', short_name: 'Atalanta', code: 'ATA', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1907, venue_name: 'Gewiss Stadium', venue_city: 'Bergamo', venue_capacity: 21747, logo_url: 'https://crests.football-data.org/102.png', website_url: 'https://www.atalanta.it', is_active: true },
    { external_id: '103', name: 'Bologna FC', short_name: 'Bologna', code: 'BOL', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1909, venue_name: 'Stadio Renato Dall\'Ara', venue_city: 'Bologna', venue_capacity: 36462, logo_url: 'https://crests.football-data.org/103.png', website_url: 'https://www.bolognafc.it', is_active: true },
    { external_id: '110', name: 'Lazio', short_name: 'Lazio', code: 'LAZ', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1900, venue_name: 'Stadio Olimpico', venue_city: 'Rome', venue_capacity: 70634, logo_url: 'https://crests.football-data.org/110.png', website_url: 'https://www.sslazio.it', is_active: true },
    { external_id: '584', name: 'Torino FC', short_name: 'Torino', code: 'TOR', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1906, venue_name: 'Stadio Olimpico Grande Torino', venue_city: 'Turin', venue_capacity: 27994, logo_url: 'https://crests.football-data.org/584.png', website_url: 'https://www.torinofc.it', is_active: true },
    { external_id: '112', name: 'Fiorentina', short_name: 'Fiorentina', code: 'FIO', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1926, venue_name: 'Stadio Artemio Franchi', venue_city: 'Florence', venue_capacity: 43147, logo_url: 'https://crests.football-data.org/112.png', website_url: 'https://www.acffiorentina.com', is_active: true },
    { external_id: '104', name: 'Cagliari Calcio', short_name: 'Cagliari', code: 'CAG', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1920, venue_name: 'Unipol Domus', venue_city: 'Cagliari', venue_capacity: 16412, logo_url: 'https://crests.football-data.org/104.png', website_url: 'https://www.cagliaricalcio.com', is_active: true },
    { external_id: '107', name: 'Genoa CFC', short_name: 'Genoa', code: 'GEN', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1893, venue_name: 'Stadio Luigi Ferraris', venue_city: 'Genoa', venue_capacity: 36536, logo_url: 'https://crests.football-data.org/107.png', website_url: 'https://www.genoacfc.it', is_active: true },
    { external_id: '450', name: 'Hellas Verona FC', short_name: 'Verona', code: 'VER', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1903, venue_name: 'Stadio Marcantonio Bentegodi', venue_city: 'Verona', venue_capacity: 39211, logo_url: 'https://crests.football-data.org/450.png', website_url: 'https://www.hellasverona.it', is_active: true },
    { external_id: '115', name: 'Udinese Calcio', short_name: 'Udinese', code: 'UDI', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1896, venue_name: 'Dacia Arena', venue_city: 'Udine', venue_capacity: 25144, logo_url: 'https://crests.football-data.org/115.png', website_url: 'https://www.udinese.it', is_active: true },
    { external_id: '1106', name: 'US Lecce', short_name: 'Lecce', code: 'LEC', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1908, venue_name: 'Stadio Via del Mare', venue_city: 'Lecce', venue_capacity: 40670, logo_url: 'https://crests.football-data.org/1106.png', website_url: 'https://www.uslecce.it', is_active: true },
    { external_id: '5693', name: 'Parma Calcio 1913', short_name: 'Parma', code: 'PAR', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1913, venue_name: 'Stadio Ennio Tardini', venue_city: 'Parma', venue_capacity: 27906, logo_url: 'https://crests.football-data.org/1030.png', website_url: 'https://www.parmacalcio1913.com', is_active: true },
    { external_id: '5710', name: 'Como 1907', short_name: 'Como', code: 'COM', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1907, venue_name: 'Stadio Giuseppe Sinigaglia', venue_city: 'Como', venue_capacity: 13602, logo_url: 'https://upload.wikimedia.org/wikipedia/en/2/2c/Como_1907_Logo.png', website_url: 'https://www.como1907.com', is_active: true },
    { external_id: '5714', name: 'Pisa SC', short_name: 'Pisa', code: 'PIS', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1909, venue_name: 'Arena Garibaldi', venue_city: 'Pisa', venue_capacity: 10000, logo_url: 'https://upload.wikimedia.org/wikipedia/en/b/b8/Pisa_SC_logo.png', website_url: 'https://www.pisasportingclub.com', is_active: true },
    { external_id: '471', name: 'US Sassuolo Calcio', short_name: 'Sassuolo', code: 'SAS', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1922, venue_name: 'Mapei Stadium', venue_city: 'Reggio Emilia', venue_capacity: 23717, logo_url: 'https://crests.football-data.org/471.png', website_url: 'https://www.sassuolocalcio.it', is_active: true },
    { external_id: '472', name: 'US Cremonese', short_name: 'Cremonese', code: 'CRE', country: 'Italy', country_code: 'IT', league: 'Serie A', league_id: '2019', continental_confederation: 'UEFA', founded_year: 1903, venue_name: 'Stadio Giovanni Zini', venue_city: 'Cremona', venue_capacity: 16003, logo_url: 'https://crests.football-data.org/472.png', website_url: 'https://www.uscremonese.it', is_active: true }
  ],
  
  bundesliga: [
    { external_id: '5', name: 'Bayern M√ºnchen', short_name: 'Bayern', code: 'FCB', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1900, venue_name: 'Allianz Arena', venue_city: 'Munich', venue_capacity: 75000, logo_url: 'https://crests.football-data.org/5.png', website_url: 'https://www.fcbayern.com', is_active: true },
    { external_id: '4', name: 'Borussia Dortmund', short_name: 'Dortmund', code: 'BVB', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1909, venue_name: 'Signal Iduna Park', venue_city: 'Dortmund', venue_capacity: 81365, logo_url: 'https://crests.football-data.org/4.png', website_url: 'https://www.bvb.de', is_active: true },
    { external_id: '15', name: 'RB Leipzig', short_name: 'Leipzig', code: 'RBL', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 2009, venue_name: 'Red Bull Arena', venue_city: 'Leipzig', venue_capacity: 47069, logo_url: 'https://crests.football-data.org/15.png', website_url: 'https://www.dierotenbullen.com', is_active: true },
    { external_id: '3', name: 'Bayer 04 Leverkusen', short_name: 'Leverkusen', code: 'B04', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1904, venue_name: 'BayArena', venue_city: 'Leverkusen', venue_capacity: 30210, logo_url: 'https://crests.football-data.org/3.png', website_url: 'https://www.bayer04.de', is_active: true },
    { external_id: '11', name: 'VfL Wolfsburg', short_name: 'Wolfsburg', code: 'WOB', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1945, venue_name: 'Volkswagen Arena', venue_city: 'Wolfsburg', venue_capacity: 30000, logo_url: 'https://crests.football-data.org/11.png', website_url: 'https://www.vfl-wolfsburg.de', is_active: true },
    { external_id: '2', name: 'TSG 1899 Hoffenheim', short_name: 'Hoffenheim', code: 'TSG', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1899, venue_name: 'PreZero Arena', venue_city: 'Sinsheim', venue_capacity: 30150, logo_url: 'https://crests.football-data.org/2.png', website_url: 'https://www.achtzehn99.de', is_active: true },
    { external_id: '19', name: 'Eintracht Frankfurt', short_name: 'Frankfurt', code: 'SGE', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1899, venue_name: 'Deutsche Bank Park', venue_city: 'Frankfurt', venue_capacity: 51500, logo_url: 'https://crests.football-data.org/19.png', website_url: 'https://www.eintracht.de', is_active: true },
    { external_id: '17', name: 'SC Freiburg', short_name: 'Freiburg', code: 'SCF', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1904, venue_name: 'Europa-Park Stadion', venue_city: 'Freiburg', venue_capacity: 34700, logo_url: 'https://crests.football-data.org/17.png', website_url: 'https://www.scfreiburg.com', is_active: true },
    { external_id: '18', name: 'Borussia M√∂nchengladbach', short_name: 'Gladbach', code: 'BMG', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1900, venue_name: 'Borussia-Park', venue_city: 'M√∂nchengladbach', venue_capacity: 54022, logo_url: 'https://crests.football-data.org/18.png', website_url: 'https://www.borussia.de', is_active: true },
    { external_id: '10', name: 'VfB Stuttgart', short_name: 'Stuttgart', code: 'VFB', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1893, venue_name: 'Mercedes-Benz Arena', venue_city: 'Stuttgart', venue_capacity: 60449, logo_url: 'https://crests.football-data.org/10.png', website_url: 'https://www.vfb.de', is_active: true },
    { external_id: '12', name: 'SV Werder Bremen', short_name: 'Bremen', code: 'SVW', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1899, venue_name: 'Weserstadion', venue_city: 'Bremen', venue_capacity: 42100, logo_url: 'https://crests.football-data.org/12.png', website_url: 'https://www.werder.de', is_active: true },
    { external_id: '28', name: 'FC Union Berlin', short_name: 'Union Berlin', code: 'FCU', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1966, venue_name: 'Stadion An der Alten F√∂rsterei', venue_city: 'Berlin', venue_capacity: 22012, logo_url: 'https://crests.football-data.org/28.png', website_url: 'https://www.fc-union-berlin.de', is_active: true },
    { external_id: '15', name: 'FSV Mainz 05', short_name: 'Mainz', code: 'M05', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1905, venue_name: 'Mewa Arena', venue_city: 'Mainz', venue_capacity: 34000, logo_url: 'https://crests.football-data.org/15.png', website_url: 'https://www.mainz05.de', is_active: true },
    { external_id: '16', name: 'FC Augsburg', short_name: 'Augsburg', code: 'FCA', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1907, venue_name: 'WWK Arena', venue_city: 'Augsburg', venue_capacity: 30660, logo_url: 'https://crests.football-data.org/16.png', website_url: 'https://www.fcaugsburg.de', is_active: true },
    { external_id: '44', name: 'FC Heidenheim 1846', short_name: 'Heidenheim', code: 'FCH', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1846, venue_name: 'Voith-Arena', venue_city: 'Heidenheim', venue_capacity: 15000, logo_url: 'https://crests.football-data.org/44.png', website_url: 'https://www.fc-heidenheim.de', is_active: true },
    { external_id: '100', name: 'RB Leipzig', short_name: 'Leipzig', code: 'RB', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 2009, venue_name: 'Red Bull Arena', venue_city: 'Leipzig', venue_capacity: 47800, logo_url: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcST_2B4yrqa8JwTu-EYgBoQxGpgYSF5aGW_KA&s', website_url: 'https://rbleipzig.com', is_active: true },
    { external_id: '20', name: 'FC St. Pauli', short_name: 'St. Pauli', code: 'STP', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1910, venue_name: 'Millerntor-Stadion', venue_city: 'Hamburg', venue_capacity: 29546, logo_url: 'https://crests.football-data.org/20.png', website_url: 'https://www.fcstpauli.com', is_active: true },
    { external_id: '1', name: 'FC K√∂ln', short_name: 'K√∂ln', code: 'KOE', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1948, venue_name: 'RheinEnergieStadion', venue_city: 'Cologne', venue_capacity: 50000, logo_url: 'https://crests.football-data.org/1.png', website_url: 'https://www.fc-koeln.de', is_active: true },
    { external_id: '7', name: 'Hamburger SV', short_name: 'Hamburg', code: 'HSV', country: 'Germany', country_code: 'DE', league: 'Bundesliga', league_id: '2002', continental_confederation: 'UEFA', founded_year: 1887, venue_name: 'Volksparkstadion', venue_city: 'Hamburg', venue_capacity: 57000, logo_url: 'https://crests.football-data.org/7.png', website_url: 'https://www.hsv.de', is_active: true }
  ],
  
  ligue1: [
    { external_id: '524', name: 'Paris Saint-Germain FC', short_name: 'PSG', code: 'PSG', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1970, venue_name: 'Parc des Princes', venue_city: 'Paris', venue_capacity: 47929, logo_url: 'https://crests.football-data.org/524.png', website_url: 'https://www.psg.fr', is_active: true },
    { external_id: '529', name: 'Olympique de Marseille', short_name: 'Marseille', code: 'OM', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1899, venue_name: 'Stade V√©lodrome', venue_city: 'Marseille', venue_capacity: 67394, logo_url: 'https://crests.football-data.org/529.png', website_url: 'https://www.om.fr', is_active: true },
    { external_id: '523', name: 'Olympique Lyonnais', short_name: 'Lyon', code: 'OL', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1950, venue_name: 'Groupama Stadium', venue_city: 'Lyon', venue_capacity: 59186, logo_url: 'https://crests.football-data.org/523.png', website_url: 'https://www.ol.fr', is_active: true },
    { external_id: '516', name: 'AS Monaco FC', short_name: 'Monaco', code: 'ASM', country: 'Monaco', country_code: 'MC', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1924, venue_name: 'Stade Louis II', venue_city: 'Monaco', venue_capacity: 18523, logo_url: 'https://crests.football-data.org/516.png', website_url: 'https://www.asmonaco.com', is_active: true },
    { external_id: '548', name: 'OGC Nice', short_name: 'Nice', code: 'OGCN', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1904, venue_name: 'Allianz Riviera', venue_city: 'Nice', venue_capacity: 35624, logo_url: 'https://crests.football-data.org/548.png', website_url: 'https://www.ogcnice.com', is_active: true },
    { external_id: '521', name: 'LOSC Lille', short_name: 'Lille', code: 'LOSC', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1944, venue_name: 'Stade Pierre-Mauroy', venue_city: 'Lille', venue_capacity: 50186, logo_url: 'https://crests.football-data.org/521.png', website_url: 'https://www.losc.fr', is_active: true },
    { external_id: '522', name: 'RC Lens', short_name: 'Lens', code: 'RCL', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1906, venue_name: 'Stade Bollaert-Delelis', venue_city: 'Lens', venue_capacity: 38223, logo_url: 'https://crests.football-data.org/522.png', website_url: 'https://www.rclens.fr', is_active: true },
    { external_id: '518', name: 'Stade Rennais FC', short_name: 'Rennes', code: 'SRF', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1901, venue_name: 'Roazhon Park', venue_city: 'Rennes', venue_capacity: 29778, logo_url: 'https://crests.football-data.org/518.png', website_url: 'https://www.staderennais.com', is_active: true },
    { external_id: '527', name: 'FC Nantes', short_name: 'Nantes', code: 'FCN', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1943, venue_name: 'Stade de la Beaujoire', venue_city: 'Nantes', venue_capacity: 35322, logo_url: 'https://crests.football-data.org/527.png', website_url: 'https://www.fcnantes.com', is_active: true },
    { external_id: '511', name: 'Toulouse FC', short_name: 'Toulouse', code: 'TFC', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1970, venue_name: 'Stadium de Toulouse', venue_city: 'Toulouse', venue_capacity: 33150, logo_url: 'https://crests.football-data.org/511.png', website_url: 'https://www.toulousefc.com', is_active: true },
    { external_id: '576', name: 'RC Strasbourg Alsace', short_name: 'Strasbourg', code: 'RCS', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1906, venue_name: 'Stade de la Meinau', venue_city: 'Strasbourg', venue_capacity: 26109, logo_url: 'https://crests.football-data.org/576.png', website_url: 'https://www.rcstrasbourgalsace.fr', is_active: true },
    { external_id: '512', name: 'Stade Brestois 29', short_name: 'Brest', code: 'SB29', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1950, venue_name: 'Stade Francis-Le Bl√©', venue_city: 'Brest', venue_capacity: 15931, logo_url: 'https://crests.football-data.org/512.png', website_url: 'https://www.sb29.bzh', is_active: true },
    { external_id: '515', name: 'Le Havre AC', short_name: 'Le Havre', code: 'HAC', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1872, venue_name: 'Stade Oc√©ane', venue_city: 'Le Havre', venue_capacity: 25178, logo_url: 'https://crests.football-data.org/515.png', website_url: 'https://www.hacfoot.com', is_active: true },
    { external_id: '532', name: 'Angers SCO', short_name: 'Angers', code: 'SCO', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1919, venue_name: 'Stade Raymond Kopa', venue_city: 'Angers', venue_capacity: 18752, logo_url: 'https://crests.football-data.org/532.png', website_url: 'https://www.angers-sco.fr', is_active: true },
    { external_id: '543', name: 'FC Lorient', short_name: 'Lorient', code: 'FCL', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1926, venue_name: 'Stade du Moustoir', venue_city: 'Lorient', venue_capacity: 18500, logo_url: 'https://crests.football-data.org/543.png', website_url: 'https://www.fclweb.fr', is_active: true },
    { external_id: '510', name: 'AJ Auxerre', short_name: 'Auxerre', code: 'AUX', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1905, venue_name: 'Stade de l\'Abb√©-Deschamps', venue_city: 'Auxerre', venue_capacity: 18541, logo_url: 'https://crests.football-data.org/510.png', website_url: 'https://www.aja.fr', is_active: true },
    { external_id: '519', name: 'FC Metz', short_name: 'Metz', code: 'FCM', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1932, venue_name: 'Stade Saint-Symphorien', venue_city: 'Metz', venue_capacity: 26661, logo_url: 'https://crests.football-data.org/519.png', website_url: 'https://www.fcmetz.com', is_active: true },
    { external_id: '85', name: 'Paris FC', short_name: 'Paris FC', code: 'PFC', country: 'France', country_code: 'FR', league: 'Ligue 1', league_id: '2015', continental_confederation: 'UEFA', founded_year: 1969, venue_name: 'Stade Charl√©ty', venue_city: 'Paris', venue_capacity: 20000, logo_url: 'https://crests.football-data.org/85.png', website_url: 'https://www.parisfc.fr', is_active: true }
  ]
};

async function upsertTeams() {
  console.log('üå± Starting comprehensive team upserting...\n');

  const allTeams = [
    ...COMPREHENSIVE_TEAMS_DATA.premierLeague,
    ...COMPREHENSIVE_TEAMS_DATA.laLiga,
    ...COMPREHENSIVE_TEAMS_DATA.serieA,
    ...COMPREHENSIVE_TEAMS_DATA.bundesliga,
    ...COMPREHENSIVE_TEAMS_DATA.ligue1
  ];

  console.log(`üìä Total teams to upsert: ${allTeams.length}`);
  console.log(`üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø Premier League: ${COMPREHENSIVE_TEAMS_DATA.premierLeague.length} teams`);
  console.log(`üá™üá∏ La Liga: ${COMPREHENSIVE_TEAMS_DATA.laLiga.length} teams`);
  console.log(`üáÆüáπ Serie A: ${COMPREHENSIVE_TEAMS_DATA.serieA.length} teams`);
  console.log(`üá©üá™ Bundesliga: ${COMPREHENSIVE_TEAMS_DATA.bundesliga.length} teams`);
  console.log(`üá´üá∑ Ligue 1: ${COMPREHENSIVE_TEAMS_DATA.ligue1.length} teams\n`);

  let successCount = 0;
  let errorCount = 0;

  // Process teams one by one for better error handling
  for (const team of allTeams) {
    try {
      const { error } = await supabase
        .from('teams')
        .upsert(team, { 
          onConflict: 'external_id',
          ignoreDuplicates: false 
        });

      if (error) {
        console.error(`‚ùå Error upserting ${team.name}:`, error.message);
        errorCount++;
      } else {
        successCount++;
        process.stdout.write(`\r‚úÖ Progress: ${successCount}/${allTeams.length}`);
      }
    } catch (error) {
      console.error(`‚ùå Error upserting ${team.name}:`, error.message);
      errorCount++;
    }
  }

  console.log(`\n\nüéâ Upserting complete!`);
  console.log(`‚úÖ Successfully upserted: ${successCount} teams`);
  if (errorCount > 0) {
    console.log(`‚ùå Errors: ${errorCount}`);
  }
}

// Run the upsert
upsertTeams()
  .then(() => {
    console.log('\nüèÅ All done!');
    process.exit(0);
  })
  .catch(error => {
    console.error('‚ùå Fatal error:', error);
    process.exit(1);
  });

